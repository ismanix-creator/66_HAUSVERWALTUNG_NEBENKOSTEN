[entity]
name = "sollstellung"
label = "labels.entity.sollstellung"
label_plural = "labels.entity.sollstellungen"
icon = "ListChecks"
primary_key = "id"

[entity.fields.id]
type = "uuid"
auto_generate = true
visible = false

[entity.fields.vertrag_id]
type = "uuid"
required = true
reference = "vertrag"
label = "labels.sollstellung.vertrag"

[entity.fields.monat]
type = "string"
required = true
pattern = "^[0-9]{4}-[0-9]{2}$"
label = "labels.sollstellung.monat"

[entity.fields.sollbetrag]
type = "currency"
required = true
label = "labels.sollstellung.sollbetrag"

[entity.fields.istbetrag]
type = "currency"
default = 0
label = "labels.sollstellung.istbetrag"

[entity.fields.status]
type = "enum"
options = ["offen", "teilweise", "bezahlt", "ueberzahlt"]
default = "offen"
label = "labels.sollstellung.status"

[entity.relations]
vertrag = { type = "many_to_one", target = "vertrag", foreign_key = "vertrag_id" }

[entity.computed]
differenz = { formula = "istbetrag - sollbetrag" }
mieter = { formula = "vertrag.mieter" }
