[entity]
name = "zaehlerstand"
label = "labels.entity.zaehlerstand"
label_plural = "labels.entity.zaehlerstaende"
icon = "Activity"
primary_key = "id"

[entity.fields.id]
type = "uuid"
auto_generate = true
visible = false

[entity.fields.zaehler_id]
type = "uuid"
required = true
reference = "zaehler"
label = "labels.zaehlerstand.zaehler"

[entity.fields.datum]
type = "date"
required = true
label = "labels.zaehlerstand.datum"

[entity.fields.stand]
type = "decimal"
required = true
min = 0
precision = 2
label = "labels.zaehlerstand.stand"

[entity.fields.ableseart]
type = "enum"
required = true
options = ["selbst", "versorger", "schaetzung"]
default = "selbst"
label = "labels.zaehlerstand.ableseart"

[entity.fields.foto]
type = "file"
accept = ["image/jpeg", "image/png"]
label = "labels.zaehlerstand.foto"

[entity.fields.notiz]
type = "text"
label = "labels.common.notiz"

[entity.relations]
zaehler = { type = "many_to_one", target = "zaehler", foreign_key = "zaehler_id" }

[entity.computed]
verbrauch = { formula = "stand - previous(stand)" }
