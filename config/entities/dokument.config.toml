[entity]
name = "dokument"
table_name = "dokumente"
label = "labels.entity.dokument"
label_plural = "labels.entity.dokumente"
icon = "File"
primary_key = "id"

[entity.fields.id]
type = "uuid"
auto_generate = true
visible = false

[entity.fields.objekt_id]
type = "uuid"
reference = "objekt"
label = "labels.dokument.objekt"

[entity.fields.einheit_id]
type = "uuid"
reference = "einheit"
label = "labels.dokument.einheit"

[entity.fields.mieter_id]
type = "uuid"
reference = "mieter"
label = "labels.dokument.mieter"

[entity.fields.vertrag_id]
type = "uuid"
reference = "vertrag"
label = "labels.dokument.vertrag"

[entity.fields.typ]
type = "enum"
required = true
options = ["rechnung", "vertrag", "ausweis", "korrespondenz", "foto", "sonstig"]
default = "sonstig"
label = "labels.dokument.typ"

[entity.fields.bezeichnung]
type = "string"
required = true
max_length = 200
label = "labels.dokument.bezeichnung"

[entity.fields.dateiname]
type = "string"
required = true
max_length = 255
label = "labels.dokument.dateiname"

[entity.fields.dateipfad]
type = "string"
required = true
label = "labels.dokument.dateipfad"

[entity.fields.dateigroesse]
type = "integer"
label = "labels.dokument.dateigroesse"

[entity.fields.mime_type]
type = "string"
max_length = 100
label = "labels.dokument.mime_type"

[entity.fields.datum]
type = "date"
label = "labels.dokument.datum"
description = "Dokumentdatum (z.B. Rechnungsdatum)"

[entity.fields.jahr]
type = "integer"
label = "labels.dokument.jahr"
description = "FÃ¼r Steuerberater-Sortierung"

[entity.fields.hochgeladen_am]
type = "datetime"
auto_generate = true
label = "labels.dokument.hochgeladen_am"

[entity.relations]
objekt = { type = "many_to_one", target = "objekt", foreign_key = "objekt_id" }
einheit = { type = "many_to_one", target = "einheit", foreign_key = "einheit_id" }
mieter = { type = "many_to_one", target = "mieter", foreign_key = "mieter_id" }
vertrag = { type = "many_to_one", target = "vertrag", foreign_key = "vertrag_id" }

[entity.validation]
mindestens_eine_zuordnung = { rule = "objekt_id is not null or mieter_id is not null or vertrag_id is not null", message = "labels.validation.dokument_zuordnung" }
